<!DOCTYPE html>
<html lang="es" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta charset="utf-8">
    <!--<script src="app/scripts/vendor/jquery-2.2.0.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="app/scripts/vendor/underscore-min.js"></script>-->
    <script type="text/javascript" src="app/scripts/vendor/angular.min.js"></script>
    <script type="text/javascript" src="app/scripts/vendor/angular-route.min.js"></script>
    <script type="text/javascript" src="app/scripts/vendor/angular-animate.min.js"></script>
    <script type="text/javascript" src="app/scripts/vendor/angular-sanitize.min.js"></script>
    <script type="text/javascript" src="app/scripts/vendor/angular-messages.min.js"></script>
    <script type="text/javascript" src="app/scripts/vendor/ngStorage.min.js"></script>
    <script type="text/javascript" src="app/scripts/vendor/ui-bootstrap-tpls.min.js"></script>
    <script type="text/javascript" src="app/scripts/vendor/ng-table.min.js"></script>
    <script type="text/javascript" src="app/scripts/vendor/angular-locale_es-ar.js"></script>
    <!--<script type="text/javascript" src="app/scripts/vendor/ui-grid.min.js"></script>
    <script type="text/javascript" src="app/scripts/vendor/toaster.min.js"></script>
    <script type="text/javascript" src="app/scripts/vendor/moment.js"></script>
    <script type="text/javascript" src="app/scripts/vendor/select.js"></script>-->
    <script type="text/javascript" src="app/scripts/vendor/angular-bootstrap-file-field.min.js"></script>
    <script type="text/javascript" src="app/scripts/services.js"></script>
    <script type="text/javascript" src="app/scripts/directives.js"></script>
<!--    <script type="text/javascript" src="app/scripts/loadingStatusDirective.js"></script>-->
    <script type="text/javascript" src="app/scripts/main.js"></script>
    <!--<script type="text/javascript" src="app/scripts/filters.js"></script>-->
    <script type="text/javascript" src="app/scripts/controllers/ejerciciosController.js"></script>
    <!--<script type="text/javascript" src="app/scripts/utils.js"></script>-->
    <script type="text/javascript" src="app/data/grupos.js"></script>
    <script type="text/javascript" src="app/data/ejercicios.js"></script>
    <script type="text/javascript" src="app/data/musicas.js"></script>
    <link rel="stylesheet" type="text/css" href="app/scripts/vendor/bootstrap.cerulean.css" />
    <link rel="stylesheet" type="text/css" href="app/scripts/vendor/ui-grid.min.css" />
    <link rel="stylesheet" type="text/css" href="app/scripts/vendor/uiGridTheme.css" />
    <link rel="stylesheet" type="text/css" href="app/styles/site.css" />
    <link rel="stylesheet" type="text/css" href="app/scripts/vendor/toaster.css" />
    <link rel="stylesheet" type="text/css" href="app/scripts/vendor/ng-table.min.css" />
</head>
<body role="document" ng-app="app" >
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container" ng-controller="headerController">
        <div class="navbar-header" >
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
            <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Biodanza</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <!--<li ><a href="/">Inicio</a></li>-->
                <!--<li ><a href="/Equivalencias/Index">Equivalencias</a></li>-->
                <li ng-class="{active:isActive('/ejercicios')}"><a href="#ejercicios">Ejercicios</a></li>
                <li ng-class="{active:isActive('/musica')}"><a href="#musicas">Música</a></li>
                <li ng-class="{active:isActive('/clases')}"><a href="#clases">Clases</a></li>
                <li ng-class="{active:isActive('/config')}"><a href="#config">Configuración</a></li>
                <!--                  <li class="dropdown">
                                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                                          <ul class="dropdown-menu">
                                              <li><a href="#">Action</a></li>
                                              <li><a href="#">Another action</a></li>
                                              <li><a href="#">Something else here</a></li>
                                              <li class="divider"></li>
                                              <li class="dropdown-header">Nav header</li>
                                              <li><a href="#">Separated link</a></li>
                                              <li><a href="#">One more separated link</a></li>
                                          </ul>
                                      </li>-->
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>
    <div class="container" ng-controller="audioController">
        <div class="row">
            <br/>
            <br/>
            <br/>
            <div class="col-sm-4">
                <div class="form-group ">
                    <audio controls id="myAudio" autoplay ng-src="{{musicaFile}}"></audio>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group ">
                    <label>{{ musicaSeleccionada.coleccion + '-' + musicaSeleccionada.nroCd + '-' + musicaSeleccionada.nroPista + ' ' + musicaSeleccionada.nombre + '(' + musicaSeleccionada.interprete + ')' }}</label>
                </div>
            </div>
        </div>
        <div class="row" ng-view=""></div>
    </div>

<script type="text/ng-template" id="ejercicios.html">
    <div class="row" style="height:80vh;overflow-y: scroll;">
        <form class="form-inline">
              <ng-include src="'grillaEjercicios.html'" />
        </form>
    </div>
</script>
<script type="text/ng-template" id="modalEjercicio.html">
    <div class="modal-content">
        <div class="modal-header">
            <h3>{{ejercicio.nombre}}  - ({{ejercicio.grupo}})</h3>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="form-horizontal" role="form">
                    <div class="col-lg-12">
                        <div class="form-group">
                            <label class="control-label " style="text-align:left;" data-ng-bind-html="ejercicio.detalle"></label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <table id="tblEjercicio" class="table table-striped table-hover" style="margin-bottom: 0px !important;">
                    <thead>
                        <tr class="success">
                            <td class="col-md-1 col-lg-1 centrado" ordenamiento="Lider">
                                <label id="lbl_Lider" runat="server">Identificador</label>
                            </td>
                            <td class="col-md-4 col-lg-4 centrado" ordenamiento="Lider">
                                <label id="lbl_Lider" runat="server">Canción</label>
                            </td>
                            <td class="col-md-3 col-lg-3 centrado" ordenamiento="Estado" style="width:60px;">
                                <label id="lbl_Estado" runat="server">Interprete</label>
                            </td>
                            <td class="col-md-1 col-lg-1 centrado" ordenamiento="Musicas">
                                <label id="lbl_MotivoAnulacion">Duración</label>
                            </td>
                            <td class="col-md-1 col-lg-1 centrado" ordenamiento="Musicas">
                                <label id="lbl_MotivoAnulacion">Play</label>
                            </td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-ng-repeat="musica in ejercicio.musicas">
                            <td>
                                {{ musica.coleccion + ' ' + musica.nroCd + '-' + musica.nroPista  }}
                            </td>
                            <td>
                                {{ musica.nombre }}
                            </td>
                            <td>
                                {{ musica.interprete }}
                            </td>
                            <td>
                                {{ musica.duracion }}
                            </td>
                            <td class="col-md-2 col-lg-2 centrado">
                                <a ng-click="playMusica(musica)">play</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <div class="controls-row">
                <button type="button" class="btn  btn-success" aria-hidden="true" ng-click="aceptar()"> Cerrar </button>
                <!--<button type="button" class="btn btn-warning" data-dismiss="modal" aria-hidden="true" ng-click="cancel()"> Cancelar </button>-->
            </div>
        </div>
    </div>
    
</script>
<script type="text/ng-template" id="grillaMusica.html">
    <div class="row form-inline">
        <div class="col-md-6">
            <label class="form-label">Ejercicio:</label>
            <input type="text" ng-model="model.selectedEjercicio" ng-blur="refreshGrid()" uib-typeahead="nombre for nombre in ejerciciosNombre | filter:$viewValue | limitTo:15" class="form-control  input-md input-search" style="width:350px;">
        </div>
        <table id="tblEjercicio" ng-table="tableParams" show-filter="true" class="table table-striped table-hover" style="margin-bottom: 0px !important;">
            <tr data-ng-repeat="musica in $data">
                <td class="col-md-1 col-lg-1 " title="'Col.'" sortable="'coleccion'" filter="{coleccion: 'text'}">
                    {{ musica.coleccion }}
                </td>
                <td class="col-md-1 col-lg-1 " title="'Identificador'" filter="{nroCd: 'text'}">
                    {{ musica.nroCd + '-' + musica.nroPista  }}
                </td>
                <td class="col-md-4 col-lg-4 " title="'Canción'" sortable="'nombre'" filter="{nombre: 'text'}">
                    <span ng-if="model.select !== true">{{ musica.nombre }}</span><a ng-if="model.select === true" ng-click="model.ok(musica)">{{ musica.nombre }}</a>
                </td>
                <td class="col-md-3 col-lg-3 " title="'Interprete'" sortable="'interprete'" filter="{interprete: 'text'}">
                    {{ musica.interprete }}
                </td>
                <td class="col-md-1 col-lg-1 " title="'Lineas'" sortable="'lineas'" filter="{lineas: 'text'}">
                    {{ musica.lineas }}
                </td>
                <td class="col-md-1 col-lg-1 " title="'Duración'" sortable="'duracion'">
                    {{ musica.duracion }}
                </td>
                <td class="col-md-1 col-lg-1" title="'play'">
                    <button type="button" class="btn btn-warning" ng-click="model.playFile(musica)"><span class="glyphicon glyphicon-play"></span></button>
                </td>
                <td class="col-md-1 col-lg-1" title="'sel'" ng-if="model.select === true">
                    <a ng-if="model.select === true" ng-click="model.ok(musica)"><span ng-click="model.selected(musica)" class="glyphicon glyphicon-ok"></span></a>
                </td>
            </tr>
        </table>
    </div>
</script>
<script type="text/ng-template" id="musicas.html">
    <div class="row" >
        <div ng-include="'grillaMusica.html'"></div>
    </div>
</script>
<script type="text/ng-template" id="config.html">
    <div class="row">
        <form class="form-inline">
            <div class="row">
                <br/>
                <div class="form-group col-md-12">
                    <label class="control-label col-md-3">Carpeta de las colecciones de musica:</label>
                    <input type="text" ng-model="config.pathMusica" class="col-md-6">
                </div>
                <button type="button" class="btn btn-primary" ng-click="grabar()">Grabar</button>
            </div>
        </form>
    </div>
</script>
<script type="text/ng-template" id="clases.html">
    <div class="row">
        <form class="form-inline">
            <button type="button" class="btn btn-primary" ng-click="nueva()">Crear Clase</button>
            <table id="tblClases" ng-table="tableParams" show-filter="true" class="table table-striped table-hover" style="margin-bottom: 0px !important;">
                <tr data-ng-repeat="clase in $data">
                    <td class="col-md-2 col-lg-2 " title="'Título'" sortable="'titulo'" filter="{titulo: 'text'}">
                        <div class="btn-group col-md-12">
                            <button type="button" class="btn btn-success" ng-click="editarClase(clase)"><span class="glyphicon glyphicon-edit"></span></button>
                            <button type="button" class="btn btn-danger" ng-click="delete(clase)" arsoft-confirmation="Esta seguro que quiere eliminar la clase?" arsoft-confirmation-title="Confirma Eliminación"><span class="glyphicon glyphicon-trash" ></span></button>
                        </div>
                        <div class="col-md-12">
                            <input type="text" style="width:100%" class="form-control" ng-model="clase.titulo" ng-change="grabar()" />
                        </div>
                    </td>
                    <td class="col-md-2 col-lg-2 " title="'Fecha Clase'" filter="{fechaClase: 'text'}">
                        <p class="input-group">
                            <input type="text" class="form-control" ng-model="clase.fechaClase" uib-datepicker-popup="dd/MM/yy" is-open="fechaClase.opened"  ng-change="grabar()"  />
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default" ng-click="fechaClase.open()"><i class="glyphicon glyphicon-calendar"></i></button>
                            </span>
                        </p>
                    </td>
                    <td class="col-md-4 col-lg-4 " title="'Ejercicios'" ng-click="editarClase(clase)">
                        <ul>
                            <li data-ng-repeat="ejercicio in clase.ejercicios">{{ ($index + 1) + ' ' + ejercicio.ejercicio.nombre + ' ' + ejercicio.musica.coleccion + '-' + ejercicio.musica.nroCd + '-' + ejercicio.musica.nroPista + ' ' + ejercicio.musica.nombre + '(' + ejercicio.musica.interprete + ')'}}</li>
                        </ul>
                    </td>
                    <td class="col-md-4 col-lg-4 " title="'Comentarios'" sortable="'comment'" filter="{comment: 'text'}">
                        <textarea style="width:100%" rows="10" class="form-control" ng-model="clase.comentarios"  ng-change="grabar()"  />
                    </td>
                </tr>
            </table>
        </form>
    </div>
</script>
<script type="text/ng-template" id="clase.html">
    <div class="row">
        <form class="form-inline">
            <div class="col-md-2">
                <button type="button" class="btn btn-primary" ng-click="cerrar()">Volver</button>
            </div>
            <div class="col-md-5">
                <label>Título Clase</label>
                <input type="text"  class="form-control" ng-model="clase.titulo" ng-change="grabar()" />
            </div>
            <div class="col-md-5 col-lg-5 " title="'Fecha Clase'" filter="{fechaClase: 'text'}">
                <label>Fecha Clase</label>
                <p class="input-group">
                    <input type="text" class="form-control" ng-model="clase.fechaClase" uib-datepicker-popup="dd/MM/yy" is-open="fechaClase.opened" ng-change="grabar()" />
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="fechaClase.open()"><i class="glyphicon glyphicon-calendar"></i></button>
                    </span>
                </p>
            </div>

            <table id="tblEjercicios" ng-table="tableParams" class="table table-striped table-hover" style="margin-bottom: 0px !important;">
                <tr data-ng-repeat="ejercicio in clase.ejercicios">
                    <td class="col-md-1 " title="'Nº'" >
                        <div class="btn-group-vertical col-md-10">
                            <button type="button" class="btn btn-success" ng-click="moveUp(ejercicio)"><span class="glyphicon glyphicon-arrow-up"></span></button>
                            <button type="button" class="btn btn-success" ng-click="moveDown(ejercicio)"><span class="glyphicon glyphicon-arrow-down"></span></button>
                        </div>
                        <div class="align-middle" >
                            <label >{{ ejercicio.nro }}</label>
                        </div>
                    </td>
                    <td class="col-md-3" title="'Ejercicio'">
                        <div class="btn-group-vertical col-md-3">
                            <button type="button" class="btn btn-primary"><buscar-ejercicio selected="ejercicio.ejercicio" onSelectedEjercicio="grabar()" /> <span class="glyphicon glyphicon-search"></span></button>
                            <button type="button" class="btn btn-danger" ng-click="deleteEjercicio(ejercicio)" arsoft-confirmation="¿Esta seguro que quiere eliminar el ejercicio?" arsoft-confirmation-title="Confirma Eliminación"><span class="glyphicon glyphicon-trash"></span></button>
                        </div>
                        <a><label class="col-md-9" data-ng-click="mostrarEjercicio(ejercicio.ejercicio)">{{ ejercicio.ejercicio.nombre }}</label></a>
                    </td>
                    <td class="col-md-2" title="'Música'">
                        <div class="btn-group col-md-12">
                            <button type="button" class="btn btn-primary"><buscar-musica selected="ejercicio.musica" onSelectedMusica="grabar()" /> <span class="glyphicon glyphicon-search"></span></button>
                            <button type="button" class="btn btn-danger" ng-click="deleteMusica(ejercicio)" arsoft-confirmation="¿Esta seguro que quiere eliminar la música?" arsoft-confirmation-title="Confirma Eliminación"><span class="glyphicon glyphicon-trash"></span></button>
                            <button type="button" class="btn btn-warning" ng-click="playFile(ejercicio.musica)"><span class="glyphicon glyphicon-play"></span></button>
                        </div>
                        <label class="col-md-12 ">{{ ejercicio.musica.coleccion + ' ' + ejercicio.musica.nroCd + '-' + ejercicio.musica.nroPista + ' ' + ejercicio.musica.nombre + ' (' + ejercicio.musica.interprete + ')' }}</label>
                        
                    </td>
                    <td class="col-md-3"  title="'Consigna'" >
                        <div class="form-group col-md-12" style="height:100%;">
                            <textarea class="form-control " rows="4" style="width:100%;height:auto !important;" ng-model="ejercicio.consigna" ng-change="grabar()" ></textarea>
                        </div>
                    </td>
                    <td class="col-md-3 " title="'Comentarios'">
                        <textarea class="form-control col-md-12" style="width:100%" rows="4" ng-model="ejercicio.comentarios" ng-change="grabar()" ></textarea>
                    </td>
                </tr>
            </table>
        </form>
    </div>
</script>
<script type="text/ng-template" id="popupBuscarMusica.html">
    <div>
        <form name="form" ng-submit="submit()">
            <div class="modal-content">
                <div class="modal-header ">
                    <div class="col-md-6">
                        <h3>Seleccionar Música</h3>
                    </div>
                    <div class="controls-row" style="float:right;">
                        <button type="button" class="btn  btn-success" aria-hidden="true" ng-click="cancel()"> Cerrar </button>
                    </div>

                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-10">
                            <div ng-include="'grillaMusica.html'"></div>
                        </div>
                    </div>
               </div>
           </div>
        </form>
    </div>    
</script>
<script type="text/ng-template" id="grillaEjercicios.html">
    <div class="col-sm-3 horizontal-collapse" uib-collapse="modelEjercicios.isCollapsed" horizontal >
        <button type="button" class="btn btn-primary btn-sm" ng-click="modelEjercicios.hideGrupos()" >
            <i class="glyphicon glyphicon-chevron-left"></i>
        </button>
        <div ng-repeat="option in modelEjercicios.grupos track by $index">
            <input type="radio" name="grupos" ng-value="option.idGrupo" ng-model="modelEjercicios.grupo" />
            <span>{{ option.nombre }}</span>
        </div>
    </div>
    <div class="" ng-class="modelEjercicios.colWidth" >
        <button type="button" class="btn btn-primary btn-sm" ng-click="modelEjercicios.showGrupos()" ng-if="modelEjercicios.isCollapsed===true">
            <i class="glyphicon glyphicon-chevron-right"></i>
        </button>
        <div class="row">
            <div class="col-sm-4">
                <div class="form-group ">
                    <label class="control-label" for="inputBuscar">Buscar: </label>
                    <input id="inputBuscar" type="text" class="form-control" ng-model="modelEjercicios.buscar" />
                </div>
            </div>
            <div class="col-sm-12 form-group" >
                <table id="tblEjercicios" class="table table-striped table-hover" style="margin-bottom: 0px !important;">
                    <thead>
                        <tr class="success">
                            <td class="col-md-6 col-lg-6 centrado">
                                <label id="lbl_Lider">Ejercicio (Grupo)</label>
                            </td>
                            <td class="col-md-6 col-lg-6">
                                <label id="lbl_MotivoAnulacion">Musicas</label>
                            </td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-ng-repeat="ejercicio in modelEjercicios.ejercicios" data-ng-show="modelEjercicios.filtrar(ejercicio)">
                            <td>
                                <a data-ng-click="modelEjercicios.mostrarEjercicio(ejercicio)" ng-bind-html-unsafe="html"> {{ ejercicio.nombre }} ({{ ejercicio.grupo }})</a>
                                <div ng-if="modelEjercicios.select === true"><button type="button" class="btn btn-success" ng-click="modelEjercicios.ok(ejercicio)">Seleccionar</button></div>
                            </td>
                            <td>
                                <div data-ng-repeat="musicaEj in ejercicio.musicas" data-ng-show="modelEjercicios.filtrarMusica(musicaEj, ejercicio)">
                                    <a ng-click="modelEjercicios.playFile(musicaEj)">{{ musicaEj.coleccion + '-' + musicaEj.nroCd + '-' + musicaEj.nroPista + ' ' + musicaEj.nombre + '(' + musicaEj.interprete + ')'  }}</a>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>    

</script>
<script type="text/ng-template" id="dialog.html">
    <div id="arsoftConfirmationDialog">
        <div class="modal-header">
            <h3 class="modal-title" ng-bind="title"></h3>
        </div>
        <div class="modal-body" ng-bind="message">

        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" ng-click="ok()">Aceptar</button>
            <button class="btn btn-warning" ng-click="cancel()">Cancelar</button>
        </div>
    </div>
</script>
<script type="text/ng-template" id="popupBuscarEjercicio.html">
    <div>
        <form name="form" ng-submit="submit()">
            <div class="modal-content">
                <div class="col-md-10">
                    <h3> Seleccionar Ejercicio</h3>
                </div>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <button type="button" class="btn btn-success" ng-click="cancel()"> Cerrar </button>
                        <div class="col-lg-12" style="height:80vh;overflow-y: scroll;">
                            <div ng-include="'grillaEjercicios.html'"></div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</script>

</body>
</html>
